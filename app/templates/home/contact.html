{% extends "index.html" %}

{% block title %} Contact Me {% endblock %}

{% block content %}
<section>
<div class="container">
    <div class="row">
        <div class="col-lg-12 text-center">
            <h2>Contact Me</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
            <form name="sentMessage" id="contactForm" action="/" novalidate method="post" onsubmit="return verifyCaptcha();">
                <div class="row control-group">
                    <div class="mui-textfield mui-textfield--float-label">
                        <input type="text" id="name" name="name" required data-validation-required-message="Please enter your name.">
                        <p class="help-block text-danger"></p>
                        <label>Name</label>
                    </div>
                </div>
                <div class="row control-group">
                    <div class="mui-textfield mui-textfield--float-label">
                        <input type="email" id="email" name="email" required data-validation-required-message="Please enter your email address.">
                        <p class="help-block text-danger"></p>
                        <label>Email Address</label>
                    </div>
                </div>
                <div class="row control-group">
                    <div class="mui-textfield mui-textfield--float-label">
                        <input type="tel" id="phone" name="phone"  required data-validation-required-message="Please enter your phone number.">
                        <p class="help-block text-danger"></p>
                        <label>Phone Number</label>
                    </div>
                </div>
                <div class="row control-group">
                    <div class="mui-textfield mui-textfield--float-label">
                        <textarea rows="5" id="message" name="message" required data-validation-required-message="Please enter a message."></textarea>
                        <p class="help-block text-danger"></p>
                        <label>Message</label>
                    </div>
                </div>
                <br>
                <div id="success"></div>
                <div class="g-recaptcha" data-sitekey="6LfGXiAUAAAAAIimN9IK16whL0QCzGu9VXbcDhk8"></div>
                <div class="row">
                    <div class="form-group col-xs-12">
                        <button class="mui-btn mui-btn--primary">Send</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
</section>
{% endblock %}

{% block scripts %}
    <!-- Contact Form JavaScript -->
    <script defer src="{{url_for('static', filename='js/jqBootstrapValidation.js')}}"></script>
        <!-- RECaptcha -->
    <script defer src='https://www.google.com/recaptcha/api.js'></script>
        <script type="text/javascript">
        $('#contactForm').submit(function( event ) {
            event.preventDefault();
            var name = $('#name');
            var email = $('#email');
            var message = $('#message');

            var nameVal = $('#name').val();
            var emailVal = $('#email').val();
            var messageVal = $('#message').val();

            var error = $("#message");
            var missing = false;

            // Remove the class so that it can be readded in case of errors
            title.removeClass("shake");
            comment.removeClass("shake");

            if (nameVal == '') {
                error.html("You must enter your name");
                title.addClass('shake');
                title.css('border-color', 'red');
                missing = true;
            }
            if (emailVal == '') {
                error.html("Please enter an email address");
                comment.addClass('shake');
                comment.css('border-color', 'red');
                missing = true;
            }
            if (messageVal == '') {
                error.html("Message cannot be empty");
                comment.addClass('shake');
                comment.css('border-color', 'red');
                missing = true;
            }

            if (missing) {
                $("#show-errors").show();
                return false;
            } else {
                return true;
            }
        });
    </script>
{% endblock %}
