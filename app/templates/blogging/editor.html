{% extends "dashboard/dashboard.html" %}
{% block title %} Create Entry {% endblock %}
{% block styles %}
{{ super() }}
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-markdown/2.10.0/css/bootstrap-markdown.min.css" rel="stylesheet"/>
{% endblock %}

{% block content %}
<div class="row">
    {% with messages = get_flashed_messages(with_categories=true) %}
      <!-- Categories: success (green), info (blue), warning (yellow), danger (red) -->
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <strong>{{ message }}</strong>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
</div>
<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header" data-background-color="purple">
                        <h4 class="title">Create Entry</h4>
                        <p class="category">Write something amazing!</p>
                    </div>
                    <div class="card-content">
                        <form class="form-horizontal" action="{{url_for('blogging.editor', post_id=post_id or None)}}" method="POST">
                            {{ form.hidden_tag() }}
                                <!-- Text input-->
                                <div class="form-group">
                                    <div class="input-group col-md-12">
                                        {{form.title(placeholder="Title", id="title", class="form-control", required="")}}
                                    </div>
                                </div>
                                <!-- Text input-->
                                <div class="form-group">
                                    <div class="input-group col-md-12">
                                        <input type="text" class="form-control" id="subtitle" placeholder="Subtitle">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="input-group col-md-12">
                                        {{form.text(placeholder="Blog text", required="", data_provide="markdown", rows="16")}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-5">
                                            Learn more about <a href="http://en.wikipedia.org/wiki/Markdown" target="_blank">MarkDown</a><br>
                                            <a target="_blank" href="{{ url_for('flask_fileupload.upload') }}">Upload new File</a>
                                    </div>
                                </div>
                                <!-- Text input-->
                                <div class="form-group">
                                    <div class="input-group col-md-8 col-md-offset-2">
                                        {{form.tags(id="tags", placeholder="Comma separated tags", class="form-control input-md", required="")}}
                                    </div>
                                </div>
                                <!-- draft input-->
                                <div class="form-group">
                                    <div class="col-md-offset-2">
                                        <label>
                                            {{form.draft(id="draft")}} draft?
                                        </label>
                                    </div>
                                </div>
                                <!-- Featured Image -->
                                <div class="form-group">
                                    <div class="input-group col-md-12">
                                        <button type="submit" class="btn" data-toggle="modal" data-target="#featured-image">Set Featured Image</button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-offset-2">
                                        {{ form.submit(id="submit", class="btn btn-primary") }}
                                    </div>
                                </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block modals %}
<!-- Modal -->
<div id="featured-image" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <form action="/file-upload"
          class="dropzone"
          id="my-awesome-dropzone"></form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
    <script defer src="{{url_for('static', filename='js/dropzone.js')}}"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-markdown/2.10.0/js/bootstrap-markdown.js">
    </script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-markdown/2.10.0/js/bootstrap-markdown.min.js">
    </script>
{% endblock %}
